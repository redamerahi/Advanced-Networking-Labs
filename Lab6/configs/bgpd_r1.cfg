hostname r1
password bgpd
enable password bgpd

log file /home/advnet/Desktop/lab6/logs/bgpd_r1.log
debug bgp updates
!debug bgp keepalives
!debug bgp events

router bgp 65100
no bgp ebgp-requires-policy
redistribute connected

neighbor 192.12.12.2 remote-as 65200
neighbor 192.13.13.3 remote-as 65345

! Avoid transit (IPv4): only advertise our own IPv4 prefix to both neighbors
neighbor 192.12.12.2 distribute-list advertise-own-ipv4 out
neighbor 192.13.13.3 distribute-list advertise-own-ipv4 out

no bgp default ipv4-unicast
neighbor 2001:1:0:1212::2 remote-as 65200

no bgp default ipv4-unicast
neighbor 2001:1:0:1313::3 remote-as 65345

address-family ipv6
redistribute connected

neighbor 2001:1:0:1212::2 activate
neighbor 2001:1:0:1313::3 activate

! Avoid transit (IPv6): only advertise our own IPv6 prefix to both neighbors
neighbor 2001:1:0:1212::2 distribute-list advertise-own-ipv6 out
neighbor 2001:1:0:1313::3 distribute-list advertise-own-ipv6 out

exit-address-family

! Filters (implicit deny for everything else)
access-list advertise-own-ipv4 permit 192.10.10.0/24
ipv6 access-list advertise-own-ipv6 permit 2001:1:0:1010::/64
